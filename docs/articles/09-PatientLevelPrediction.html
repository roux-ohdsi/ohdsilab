<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Patient Level Prediction • ohdsilab</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Patient Level Prediction">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-black" data-bs-theme="dark" aria-label="Site navigation"><div class="container">
    <div style="height:40px;display:inline;margin:0 10px;"><a href="https://ohdsi.northeastern.edu/" class="external-link"><img src="logo.png" style="width:auto;height:100%;"></a></div>
    <a class="navbar-brand me-2" href="../index.html">ohdsilab</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01-intro-to-ohdsilab.html">Introduction to ohdsilab (start here!)</a></li>
    <li><a class="dropdown-item" href="../articles/02-getting-started-with-box.html">Getting Started with the OHDSI-Lab Box</a></li>
    <li><a class="dropdown-item" href="../articles/03-Generating-a-cohort.html">Generating a cohort</a></li>
    <li><a class="dropdown-item" href="../articles/04-Generating-a-cohort-with_Capr.html">Generating a cohort with Capr</a></li>
    <li><a class="dropdown-item" href="../articles/05-feature-extraction-covariates.html">Generating Covariates and Table 1</a></li>
    <li><a class="dropdown-item" href="../articles/06-feature-extraction-characterization.html">Generating Characterization Files</a></li>
    <li><a class="dropdown-item" href="../articles/07-working-with-omop-cdm.html">Working with Data from the ohdsilab database</a></li>
    <li><a class="dropdown-item" href="../articles/08-CohortExplorer.html">Visualizing Sample Data</a></li>
    <li><a class="dropdown-item" href="../articles/09-PatientLevelPrediction.html">Patient Level Prediction</a></li>
    <li><a class="dropdown-item" href="../articles/10-Eunomia.html">Generating a Synthetic Dataset</a></li>
    <li><a class="dropdown-item" href="../articles/11-Stategus.html">Designing a network analysis using Strategus</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/roux-ohdsi/ohdsilab/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Patient Level Prediction</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/roux-ohdsi/ohdsilab/blob/HEAD/vignettes/09-PatientLevelPrediction.Rmd" class="external-link"><code>vignettes/09-PatientLevelPrediction.Rmd</code></a></small>
      <div class="d-none name"><code>09-PatientLevelPrediction.Rmd</code></div>
    </div>

    
    
<p>This tutorial will illustrate how to use the PatientLevelPrediction
package created by the OHDSI community and described here: <a href="https://ohdsi.github.io/PatientLevelPrediction/" class="external-link uri">https://ohdsi.github.io/PatientLevelPrediction/</a>.
Researchers can use this package to predict risk of specific outcomes
for persons in a target cohort. The prediction results can be analyzed
programmatically or in an R Shiny application.</p>
<p>The Pharmetrics dataset (containing real patient claims data) will be
used in this tutorial to ensure that correlation between risk of outcome
and presence of outcome is consistent (Synthetic data may not produce
consistent relationships between covariates). Any person-level results
should not be shared with individuals who are not active OHDSI Lab
users.</p>
<p>We’ll need to install one new package: PatientLevelPrediction</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="st">"OHDSI/PatientLevelPrediction"</span><span class="op">)</span></span></code></pre></div>
<p>We’ll generate a cohort from ATLAS as we did in vignette 3, except
now we need two cohorts: a target cohort (i.e. the population we’re
analyzing), 4675 (Persons with type 2 diabetes and prescribed metformin
within 0-30 days after their type 2 diabetes diagnosis) and an outcome
cohort (i.e. the outcome we’re predicting risk for) 4681 (Persons with
congestive heart failure).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Packages =====================================================================</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ohdsi.github.io/PatientLevelPrediction/" class="external-link">PatientLevelPrediction</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ohdsi.github.io/DatabaseConnector/" class="external-link">DatabaseConnector</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ohdsi.github.io/DatabaseConnector/" class="external-link">DatabaseConnector</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://keyring.r-lib.org/" class="external-link">keyring</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ohdsi.github.io/CohortGenerator/" class="external-link">CohortGenerator</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># DB and ATLAS Connections =====================================================</span></span>
<span><span class="va">atlas_url</span> <span class="op">=</span> <span class="st">"https://atlas.roux-ohdsi-prod.aws.northeastern.edu/WebAPI"</span></span>
<span><span class="va">cdm_schema</span> <span class="op">=</span> <span class="st">"omop_cdm_53_pmtx_202203"</span></span>
<span><span class="va">write_schema</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"work_"</span>, <span class="fu">keyring</span><span class="fu">::</span><span class="fu"><a href="https://keyring.r-lib.org/reference/key_get.html" class="external-link">key_get</a></span><span class="op">(</span><span class="st">"db_username"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Setting connectionDetails for later use</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"DATABASECONNECTOR_JAR_FOLDER"</span> <span class="op">=</span> <span class="st">"Insert path to JDBC driver"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">connectionDetails</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ohdsi.github.io/DatabaseConnector/reference/createConnectionDetails.html" class="external-link">createConnectionDetails</a></span><span class="op">(</span></span>
<span>    dbms <span class="op">=</span> <span class="st">"redshift"</span>,</span>
<span>    server <span class="op">=</span> <span class="st">"ohdsi-lab-redshift-cluster-prod.clsyktjhufn7.us-east-1.redshift.amazonaws.com/ohdsi_lab"</span>,</span>
<span>    port <span class="op">=</span> <span class="fl">5439</span>,</span>
<span>    user <span class="op">=</span> <span class="fu">keyring</span><span class="fu">::</span><span class="fu"><a href="https://keyring.r-lib.org/reference/key_get.html" class="external-link">key_get</a></span><span class="op">(</span><span class="st">"db_username"</span><span class="op">)</span>,</span>
<span>    password <span class="op">=</span> <span class="fu">keyring</span><span class="fu">::</span><span class="fu"><a href="https://keyring.r-lib.org/reference/key_get.html" class="external-link">key_get</a></span><span class="op">(</span><span class="st">"db_password"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Connecting to the database for the purpose of setting the following options</span></span>
<span><span class="va">con</span> <span class="op">=</span>  <span class="fu">DatabaseConnector</span><span class="fu">::</span><span class="fu"><a href="https://ohdsi.github.io/DatabaseConnector/reference/connect.html" class="external-link">connect</a></span><span class="op">(</span><span class="va">connectionDetails</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>con.default.value <span class="op">=</span> <span class="va">con</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>schema.default.value <span class="op">=</span> <span class="va">cdm_schema</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>write_schema.default.value <span class="op">=</span> <span class="va">write_schema</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Connecting to ATLAS</span></span>
<span><span class="fu">ROhdsiWebApi</span><span class="fu">::</span><span class="fu">authorizeWebApi</span><span class="op">(</span></span>
<span>    <span class="va">atlas_url</span>,</span>
<span>    authMethod <span class="op">=</span> <span class="st">"db"</span>,</span>
<span>    webApiUsername <span class="op">=</span> <span class="fu">keyring</span><span class="fu">::</span><span class="fu"><a href="https://keyring.r-lib.org/reference/key_get.html" class="external-link">key_get</a></span><span class="op">(</span><span class="st">"atlas_username"</span><span class="op">)</span>,</span>
<span>    webApiPassword <span class="op">=</span> <span class="fu">keyring</span><span class="fu">::</span><span class="fu"><a href="https://keyring.r-lib.org/reference/key_get.html" class="external-link">key_get</a></span><span class="op">(</span><span class="st">"atlas_password"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Choosing an ATLAS cohort definition</span></span>
<span><span class="va">cohortIds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4675</span>, <span class="fl">4681</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Pulling the cohort definition from ATLAS</span></span>
<span><span class="va">cohortDefinitionSet</span> <span class="op">&lt;-</span> <span class="fu">ROhdsiWebApi</span><span class="fu">::</span><span class="fu">exportCohortDefinitionSet</span><span class="op">(</span></span>
<span>    baseUrl <span class="op">=</span> <span class="va">atlas_url</span>,</span>
<span>    cohortIds <span class="op">=</span> <span class="va">cohortIds</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Setting naming convention for cohort tables</span></span>
<span><span class="va">cohortTableNames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/getCohortTableNames.html" class="external-link">getCohortTableNames</a></span><span class="op">(</span>cohortTable <span class="op">=</span> <span class="st">"cohort"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Creating cohort tables based on naming convention</span></span>
<span><span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/createCohortTables.html" class="external-link">createCohortTables</a></span><span class="op">(</span></span>
<span>    connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span>
<span>    cohortTableNames <span class="op">=</span> <span class="va">cohortTableNames</span>,</span>
<span>    cohortDatabaseSchema <span class="op">=</span> <span class="va">write_schema</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generating the cohort population from the Pharmetrics dataset</span></span>
<span><span class="va">cohortsGenerated</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ohdsi.github.io/CohortGenerator/reference/generateCohortSet.html" class="external-link">generateCohortSet</a></span><span class="op">(</span></span>
<span>    connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span>
<span>    cdmDatabaseSchema <span class="op">=</span> <span class="va">cdm_schema</span>,</span>
<span>    cohortDatabaseSchema <span class="op">=</span> <span class="va">write_schema</span>,</span>
<span>    cohortTableNames <span class="op">=</span> <span class="va">cohortTableNames</span>,</span>
<span>    cohortDefinitionSet <span class="op">=</span> <span class="va">cohortDefinitionSet</span><span class="op">)</span></span></code></pre></div>
<p>Now, we need to create the settings for the prediction model. First
we set up the database and cohort details.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">databaseDetails</span> <span class="op">&lt;-</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">createDatabaseDetails</span><span class="op">(</span></span>
<span>  connectionDetails <span class="op">=</span> <span class="va">connectionDetails</span>,</span>
<span>  cdmDatabaseSchema <span class="op">=</span> <span class="va">cdm_schema</span>,</span>
<span>  cdmDatabaseName <span class="op">=</span> <span class="va">cdm_schema</span>,</span>
<span>  cdmDatabaseId <span class="op">=</span> <span class="st">"pmtx"</span>,</span>
<span>  cohortDatabaseSchema <span class="op">=</span> <span class="va">write_schema</span>,</span>
<span>  cohortTable <span class="op">=</span> <span class="st">"cohort"</span>,</span>
<span>  outcomeDatabaseSchema <span class="op">=</span> <span class="va">write_schema</span>,</span>
<span>  outcomeTable <span class="op">=</span> <span class="st">"cohort"</span>,</span>
<span>  targetId <span class="op">=</span> <span class="fl">4675</span>,</span>
<span>  outcomeIds <span class="op">=</span> <span class="fl">4681</span><span class="op">)</span></span></code></pre></div>
<p>Next, we create covariates using Feature Extraction as shown in
vignette 6. This may take some time to run.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plpData</span> <span class="op">&lt;-</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">getPlpData</span><span class="op">(</span></span>
<span>  databaseDetails <span class="op">=</span> <span class="va">databaseDetails</span>,</span>
<span>  covariateSettings <span class="op">=</span> <span class="fu">FeatureExtraction</span><span class="fu">::</span><span class="fu">createDefaultCovariateSettings</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>So we don’t have to run the above again, we save plpData as an object
and then load it again.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#save plpData</span></span>
<span><span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">savePlpData</span><span class="op">(</span><span class="va">plpData</span>, <span class="st">"plpData"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#load plpData</span></span>
<span><span class="va">plpData</span> <span class="op">&lt;-</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">loadPlpData</span><span class="op">(</span><span class="st">"plpData"</span><span class="op">)</span></span></code></pre></div>
<p>Next, we set our population settings, choosing which persons in our
cohort to include/remove from the prediction.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">populationSettings</span> <span class="op">&lt;-</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">createStudyPopulationSettings</span><span class="op">(</span></span>
<span>  binary <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  firstExposureOnly <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  washoutPeriod <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  removeSubjectsWithPriorOutcome <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  priorOutcomeLookback <span class="op">=</span> <span class="fl">99999</span>,</span>
<span>  requireTimeAtRisk <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  minTimeAtRisk <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  riskWindowStart <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  startAnchor <span class="op">=</span> <span class="st">'cohort start'</span>,</span>
<span>  riskWindowEnd <span class="op">=</span> <span class="fl">365</span>,</span>
<span>  endAnchor <span class="op">=</span> <span class="st">'cohort start'</span><span class="op">)</span></span></code></pre></div>
<p>Here,we select the type of prediction model we want to use. In this
example, we will use lasso logistic regression.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lr_model</span> <span class="op">&lt;-</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">setLassoLogisticRegression</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Now, we’re ready to run the model (and set a few more settings).
Depending on the size of our cohort and other settings, this may take a
while (when I ran it, it took 2 hours). Feel free to create more
restrictive cohorts or edit any of the prediction settings.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lr_results</span> <span class="op">&lt;-</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">runPlp</span><span class="op">(</span> </span>
<span>  plpData <span class="op">=</span> <span class="va">plpdata</span>, </span>
<span>  outcomeId <span class="op">=</span> <span class="fl">4681</span>,</span>
<span>  analysisId <span class="op">=</span> <span class="st">'demo'</span>, </span>
<span>  analysisName <span class="op">=</span> <span class="st">'run plp demo'</span>, </span>
<span>  populationSettings <span class="op">=</span> <span class="va">populationSettings</span>, </span>
<span>  splitSettings <span class="op">=</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">createDefaultSplitSetting</span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>    testFraction <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>    nfold <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, </span>
<span>  sampleSettings <span class="op">=</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">createSampleSettings</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  preprocessSettings <span class="op">=</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">createPreprocessSettings</span><span class="op">(</span></span>
<span>    minFraction <span class="op">=</span> <span class="fl">0</span>, </span>
<span>    normalize <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, </span>
<span>  modelSettings <span class="op">=</span> <span class="va">lr_model</span>, </span>
<span>  executeSettings <span class="op">=</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">createDefaultExecuteSettings</span><span class="op">(</span><span class="op">)</span>, </span>
<span>  saveDirectory <span class="op">=</span> <span class="st">"insert path to directory you want to save your results to"</span><span class="op">)</span></span></code></pre></div>
<p>Again, because the above code takes so long to run, let’s save the
results as an object for quick loading.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#save results</span></span>
<span><span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">savePlpResult</span><span class="op">(</span><span class="va">lr_results</span>, <span class="st">"demo_results"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#load results</span></span>
<span><span class="va">lr_results</span> <span class="op">&lt;-</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">loadPlpResult</span><span class="op">(</span><span class="st">"demo_results"</span><span class="op">)</span></span></code></pre></div>
<p>Now that we have run the prediction model, let’s view the results two
ways. First, to launch the R Shiny application, we run the following
code.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">viewPlp</span><span class="op">(</span><span class="va">lr_results</span><span class="op">)</span></span></code></pre></div>
<p>Finally, let’s view the results in tabular form. Once you run the
following code, note that the value column contains the risk that that
person had of experiencing the outcome. If we calculated the average of
the value column for each outcome (0 meaning no outcome, and 1 meaning
with outcome), we could judge whether the model we used was successful
in prediction.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">PatientLevelPrediction</span><span class="fu">::</span><span class="fu">loadPlpResult</span><span class="op">(</span><span class="st">"insert path to plpResult directory It should have saved within the directory you set above."</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">prediction</span><span class="op">)</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Louisa Smith, Rob Cavanaugh.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
